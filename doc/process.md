# 施設データ処理バッチ

このバッチファイルは、施設データの処理を一連の流れで自動実行します。具体的には以下の処理を順番に行います：

1. 仮想環境（venv）のアクティベーション
2. 施設と停留所の距離チェックスクリプト（facilities_check.py）の実行
3. JSON データの圧縮（json_minifier.py を使用）
4. 仮想環境の非アクティブ化

## 使用方法

コマンドプロンプトやエクスプローラーから`run_process.bat`をダブルクリックで実行するだけです。

```
run_process.bat
```

## 各処理の詳細

### 1. 仮想環境のアクティベーション

Python の仮想環境（venv）をアクティベートします。これにより、適切なパッケージが利用可能な状態になります。

### 2. 施設と停留所の距離チェック

`facilities_check.py`スクリプトを実行して、施設と停留所の距離をチェックします。このスクリプトはバリアフリー施設データと停留所データを比較し、距離情報を計算します。

### 3. JSON データの圧縮

JSON データを圧縮するために`json_minifier.py`スクリプトを実行します。以下の 2 つのフォルダに対して処理を行います：

- `kazaguruma_json` - かざぐるま用の JSON データフォルダ
- `json` - 一般的な JSON データフォルダ

それぞれのフォルダに対して、インデントなしの JSON ファイルを生成し、「元のフォルダ名\_min」という新しいフォルダに保存します。例えば：

- `kazaguruma_json` → `kazaguruma_json_min`
- `json` → `json_min`

## エラー処理

バッチファイルは各ステップでエラーチェックを行い、問題が発生した場合は適切なメッセージを表示します：

- 仮想環境のアクティベーションに失敗した場合
- 距離チェックスクリプトの実行に失敗した場合
- JSON データの圧縮処理に失敗した場合

## 前提条件

このバッチファイルを実行するには、以下の条件が必要です：

1. Python がインストールされていること
2. `venv`ディレクトリに仮想環境が作成済みであること
3. `facilities_check.py`スクリプトが存在すること
4. `json_minifier.py`スクリプトが存在すること

## 注意点

- 圧縮処理の際に、既存の「\_min」フォルダがある場合は上書きの確認が表示されます
- 処理には、ファイルの数に応じて時間がかかる場合があります
- 全ての処理が完了すると、自動的に仮想環境が非アクティブ化されます
- 最後に処理の完了を確認するため、キー入力待ちの状態になります（pause）
